"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const r=require("react"),T=require("../../constants/names/COMPONENT_DISPLAY_NAMES.js");require("../../constants/names/COMPONENT_CLASSNAME_NAMES.js");require("../../constants/designs/BACKGROUND_COLORS.js");require("../../constants/designs/BORDER_COLORS.js");require("../../constants/designs/SHADOW_STYLES.js");require("../../constants/designs/TEXT_COLORS.js");require("../../constants/designs/THEME_BREAKPOINTS.js");const L=require("../../hooks/useThemeDesigns/index.js");require("../Theme/ThemeProvider.context.js");const R=require("../../hooks/useCustomStyle/index.js"),l=require("./Popover.types.js");function A({position:E,isPositioned:n,isTriggerVisible:P}){const{BackgroundColors:o,ShadowStyles:h}=L.default(),u=R.default({displayName:T.COMPONENT_DISPLAY_NAMES.Popover}),v=r.useMemo(()=>({position:"fixed",top:E.top,left:E.left,zIndex:1400,visibility:n&&P?"visible":"hidden"}),[E,n,P]);return{componentStyle:r.useMemo(()=>({width:"max-content",borderRadius:8,backgroundColor:o[1],boxShadow:h[2],...v,...u}),[o,h,v,u]),__:{DynamicPlacementStyles:v}}}function V({triggerRef:E,popoverRef:n,placement:P=l.POPOVER_PLACEMENT_MAP.BOTTOM,offset:o=2,isOpen:h}){const[u,v]=r.useState({top:0,left:0}),[s,M]=r.useState(!1),[t,O]=r.useState(!0),i=r.useCallback(()=>{const _=E.current,w=n.current;if(!_||!w)return;const e=_.getBoundingClientRect(),c=w.getBoundingClientRect(),m=window.innerWidth,p=window.innerHeight,f=e.bottom>0&&e.top<p&&e.right>0&&e.left<m;if(O(f),!f)return;let a=0,d=0;switch(P){case l.POPOVER_PLACEMENT_MAP.BOTTOM:a=e.bottom+o,d=e.left+e.width/2-c.width/2;break;case l.POPOVER_PLACEMENT_MAP.TOP:a=e.top-c.height-o,d=e.left+e.width/2-c.width/2;break;case l.POPOVER_PLACEMENT_MAP.LEFT:a=e.top+e.height/2-c.height/2,d=e.left-c.width-o;break;case l.POPOVER_PLACEMENT_MAP.RIGHT:a=e.top+e.height/2-c.height/2,d=e.right+o;break}d<8&&(d=8),d+c.width>m-8&&(d=m-c.width-8),a<8&&(a=8),a+c.height>p-8&&(a=p-c.height-8),v({top:a,left:d}),M(!0)},[E,n,P,o]);return r.useEffect(()=>{if(!h){M(!1),O(!0);return}return i(),window.addEventListener("scroll",i,!0),window.addEventListener("resize",i),()=>{window.removeEventListener("scroll",i,!0),window.removeEventListener("resize",i)}},[h,i]),{position:u,isPositioned:s,isTriggerVisible:t}}function S({defaultOpen:E=!1,triggerEvent:n=l.POPOVER_TRIGGER_EVENT_MAP.CLICK,autoCloseOnClickOutside:P=!0,triggerRef:o,popoverRef:h}){const[u,v]=r.useState(E),s=r.useCallback(t=>{v(t)},[]);r.useEffect(()=>{const t=o.current;if(!t)return;const O=()=>{s(!u)},i=()=>{s(!0)},_=()=>{s(!1)};if(n===l.POPOVER_TRIGGER_EVENT_MAP.CLICK)return t.addEventListener("click",O),()=>t.removeEventListener("click",O);if(n===l.POPOVER_TRIGGER_EVENT_MAP.HOVER)return t.addEventListener("mouseenter",i),t.addEventListener("mouseleave",_),()=>{t.removeEventListener("mouseenter",i),t.removeEventListener("mouseleave",_)}},[n,o,u,s]),r.useEffect(()=>{if(!u||!P||n===l.POPOVER_TRIGGER_EVENT_MAP.HOVER)return;const t=O=>{const i=o.current,_=h.current;_&&!_.contains(O.target)&&i&&!i.contains(O.target)&&s(!1)};return document.addEventListener("mousedown",t),()=>document.removeEventListener("mousedown",t)},[u,P,n,o,h,s]);const M=r.useMemo(()=>n!==l.POPOVER_TRIGGER_EVENT_MAP.HOVER?{}:{onMouseEnter:()=>s(!0),onMouseLeave:()=>s(!1)},[n,s]);return r.useMemo(()=>({open:u,PopoverMouseEvents:M}),[u,M])}exports.usePopoverActions=S;exports.usePopoverPosition=V;exports.usePopoverStyles=A;
