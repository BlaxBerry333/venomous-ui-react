"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const s=require("react"),w=require("../../constants/names/COMPONENT_DISPLAY_NAMES.js");require("../../constants/names/COMPONENT_CLASSNAME_NAMES.js");require("../../constants/designs/BACKGROUND_COLORS.js");require("../../constants/designs/BORDER_COLORS.js");require("../../constants/designs/SHADOW_STYLES.js");require("../../constants/designs/TEXT_COLORS.js");require("../../constants/designs/THEME_BREAKPOINTS.js");const L=require("../../hooks/useThemeDesigns/index.js");require("../Theme/ThemeProvider.context.js");const R=require("../../hooks/useCustomStyle/index.js"),c=require("./Popover.types.js");function f({position:d}){const{BackgroundColors:a,ShadowStyles:u}=L.default(),o=R.default({displayName:w.COMPONENT_DISPLAY_NAMES.Popover}),l=s.useMemo(()=>({position:"fixed",top:d.top,left:d.left,zIndex:1400}),[d]);return{componentStyle:s.useMemo(()=>({boxSizing:"border-box",WebkitTapHighlightColor:"transparent",width:"max-content",borderRadius:8,backgroundColor:a[1],boxShadow:u[2],...l,...o}),[a,u,l,o]),__:{DynamicPlacementStyles:l}}}function p({triggerRef:d,popoverRef:a,placement:u=c.POPOVER_PLACEMENT_MAP.BOTTOM,offset:o=2,open:l}){const[v,O]=s.useState({top:0,left:0}),P=s.useCallback(()=>{const _=d.current,h=a.current;if(!_||!h)return;const t=_.getBoundingClientRect(),e=h.getBoundingClientRect();let r=0,i=0;switch(u){case c.POPOVER_PLACEMENT_MAP.BOTTOM:r=t.bottom+o,i=t.left+t.width/2-e.width/2;break;case c.POPOVER_PLACEMENT_MAP.TOP:r=t.top-e.height-o,i=t.left+t.width/2-e.width/2;break;case c.POPOVER_PLACEMENT_MAP.LEFT:r=t.top+t.height/2-e.height/2,i=t.left-e.width-o;break;case c.POPOVER_PLACEMENT_MAP.RIGHT:r=t.top+t.height/2-e.height/2,i=t.right+o;break}const n=window.innerWidth,E=window.innerHeight;i<8&&(i=8),i+e.width>n-8&&(i=n-e.width-8),r<8&&(r=8),r+e.height>E-8&&(r=E-e.height-8),O({top:r,left:i})},[d,a,u,o]);return s.useEffect(()=>{if(l)return P(),window.addEventListener("scroll",P,!0),window.addEventListener("resize",P),()=>{window.removeEventListener("scroll",P,!0),window.removeEventListener("resize",P)}},[l,P]),{position:v}}function T({defaultOpen:d=!1,open:a,onOpenChange:u,trigger:o=c.POPOVER_TRIGGER_MAP.CLICK,autoCloseOnClickOutside:l=!0,triggerRef:v,popoverRef:O}){const[P,_]=s.useState(d),h=a!==void 0,t=h?a:P,e=s.useCallback(n=>{h||_(n),u==null||u(n)},[h,u]),r=s.useCallback(()=>{e(!t)},[t,e]);s.useEffect(()=>{const n=v.current;if(!n)return;const E=()=>{e(!t)},M=()=>{e(!0)},m=()=>{e(!1)};if(o===c.POPOVER_TRIGGER_MAP.CLICK)return n.addEventListener("click",E),()=>n.removeEventListener("click",E);if(o===c.POPOVER_TRIGGER_MAP.HOVER)return n.addEventListener("mouseenter",M),n.addEventListener("mouseleave",m),()=>{n.removeEventListener("mouseenter",M),n.removeEventListener("mouseleave",m)}},[o,v,t,e]),s.useEffect(()=>{if(!t||!l||o===c.POPOVER_TRIGGER_MAP.HOVER)return;const n=E=>{const M=v.current,m=O.current;m&&!m.contains(E.target)&&M&&!M.contains(E.target)&&e(!1)};return document.addEventListener("mousedown",n),()=>document.removeEventListener("mousedown",n)},[t,l,o,v,O,e]);const i=s.useMemo(()=>o!==c.POPOVER_TRIGGER_MAP.HOVER?{}:{onMouseEnter:()=>e(!0),onMouseLeave:()=>e(!1)},[o,e]);return s.useMemo(()=>({open:t,onToggle:r,PopoverMouseEvents:i}),[t,r,i])}exports.usePopoverActions=T;exports.usePopoverPosition=p;exports.usePopoverStyles=f;
