"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const p=require("react/jsx-runtime"),f=require("clsx"),b=require("framer-motion"),r=require("react"),E=require("../../hooks/useHandler/index.js");require("../Card/CardsBook.js");require("../Card/CardsProduct.js");require("../Card/CardsTitleBlock.js");const I=require("../Card/Card.js"),y=r.memo(({children:x,style:w,contentStyle:k,direction:g="bottom",renderTrigger:q,trigger:n="click",onClickOutside:h})=>{const t=E.default(),m=r.useRef(null),d=r.useRef(null),i=r.useRef(null),[R,P]=r.useState({top:0,left:0});r.useEffect(()=>{if(n!=="click")return;const a=e=>{var o;i.current&&!i.current.contains(e.target)&&!((o=d.current)!=null&&o.contains(e.target))&&(t.close(),h&&h())};return t.isOpen&&document.addEventListener("mousedown",a),()=>{document.removeEventListener("mousedown",a)}},[t,n,h]),r.useEffect(()=>{if(t.isOpen&&m.current&&d.current&&i.current){const a=m.current.getBoundingClientRect(),e=d.current.getBoundingClientRect(),o=i.current.offsetWidth,v=i.current.offsetHeight,l=e.top-a.top,u=e.left-a.left;let s,c;switch(g){case"top":s=l-v,c=u+e.width/2-o/2;break;case"bottom":s=l+e.height,c=u+e.width/2-o/2;break;case"left":s=l+e.height/2-v/2,c=u-o;break;case"right":s=l+e.height/2-v/2,c=u+e.width;break;default:s=l+e.height,c=u+e.width/2-o/2}P({top:s,left:c})}},[t.isOpen,g]);const j=()=>{n==="hover"&&t.open()},M=()=>{n==="hover"&&t.close()};return p.jsxs("div",{ref:m,className:f("Venomous-UI-React--Popover.TriggerWrapper"),style:{display:"inline-block",position:"relative",...w},...n==="hover"?{onMouseEnter:j,onMouseLeave:M}:{},children:[p.jsx("div",{ref:d,style:{display:"inline-block",width:"100%"},className:f("Venomous-UI-React--Popover.Trigger"),...n==="click"?{onClick:t.toggle}:{},children:q(t.isOpen)}),p.jsx(b.AnimatePresence,{children:t.isOpen&&p.jsx(b.motion.div,{ref:i,initial:{opacity:0,y:0},animate:{opacity:1,y:0},exit:{opacity:0,y:0},transition:{duration:.2},className:f("Venomous-UI-React--Popover"),style:{boxSizing:"border-box",position:"absolute",top:R.top,left:R.left,zIndex:1e3},children:p.jsx(I.default,{className:f("Venomous-UI-React--Popover.Content"),style:{width:"100%",padding:"8px",...k},children:x})})})]})});y.displayName="Popover";exports.default=y;
