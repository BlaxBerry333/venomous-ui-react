"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const f=require("react/jsx-runtime"),v=require("clsx"),y=require("framer-motion"),l=require("react"),O=require("../../hooks/useHandler/index.js");require("../Card/CardsBook.js");require("../Card/CardsProduct.js");require("../Card/CardsTitleBlock.js");const I=require("../Card/Card.js"),w=l.memo(({children:x,style:k,contentStyle:q,direction:g="bottom",alignment:s="center",renderTrigger:P,trigger:a="click",onClickOutside:m})=>{const t=O.default(),R=l.useRef(null),h=l.useRef(null),u=l.useRef(null),[b,j]=l.useState({top:0,left:0});l.useEffect(()=>{if(a!=="click")return;const p=e=>{var i;u.current&&!u.current.contains(e.target)&&!((i=h.current)!=null&&i.contains(e.target))&&(t.close(),m&&m())};return t.isOpen&&document.addEventListener("mousedown",p),()=>{document.removeEventListener("mousedown",p)}},[t,a,m]),l.useEffect(()=>{if(t.isOpen&&R.current&&h.current&&u.current){const p=R.current.getBoundingClientRect(),e=h.current.getBoundingClientRect(),i=u.current.offsetWidth,d=u.current.offsetHeight,n=e.top-p.top,c=e.left-p.left;let o,r;switch(g){case"top":o=n-d,s==="start"?r=c:s==="end"?r=c+e.width-i:r=c+e.width/2-i/2;break;case"bottom":o=n+e.height,s==="start"?r=c:s==="end"?r=c+e.width-i:r=c+e.width/2-i/2;break;case"left":r=c-i,s==="start"?o=n:s==="end"?o=n+e.height-d:o=n+e.height/2-d/2;break;case"right":r=c+e.width,s==="start"?o=n:s==="end"?o=n+e.height-d:o=n+e.height/2-d/2;break;default:o=n+e.height,r=c+e.width/2-i/2}j({top:o,left:r})}},[t.isOpen,g,s]);const M=()=>{a==="hover"&&t.open()},E=()=>{a==="hover"&&t.close()};return f.jsxs("div",{ref:R,className:v("Venomous-UI-React--Popover.TriggerWrapper"),style:{display:"inline-block",position:"relative",...k},...a==="hover"?{onMouseEnter:M,onMouseLeave:E}:{},children:[f.jsx("div",{ref:h,style:{display:"inline-block",width:"100%"},className:v("Venomous-UI-React--Popover.Trigger"),...a==="click"?{onClick:t.toggle}:{},children:P({isOpen:t.isOpen,close:t.close,toggle:t.toggle})}),f.jsx(y.AnimatePresence,{children:t.isOpen&&f.jsx(y.motion.div,{ref:u,initial:{opacity:0,y:0},animate:{opacity:1,y:0},exit:{opacity:0,y:0},transition:{duration:.2},className:v("Venomous-UI-React--Popover"),style:{boxSizing:"border-box",position:"absolute",top:b.top,left:b.left,zIndex:1e3},children:f.jsx(I.default,{className:v("Venomous-UI-React--Popover.Content"),style:{width:"100%",padding:"8px",...q},children:x})})})]})});w.displayName="Popover";exports.default=w;
