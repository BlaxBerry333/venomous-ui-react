"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const t=require("react/jsx-runtime"),r=require("react"),d=require("clsx"),g=require("../../../Box/Box.component.js"),ee=require("../../../../constants/names/COMPONENT_DISPLAY_NAMES.js"),S=require("../../../../constants/names/COMPONENT_CLASSNAME_NAMES.js");require("../../../../constants/designs/BACKGROUND_COLORS.js");require("../../../../constants/designs/BORDER_COLORS.js");require("../../../../constants/designs/SHADOW_STYLES.js");require("../../../../constants/designs/TEXT_COLORS.js");require("../../../../constants/designs/THEME_BREAKPOINTS.js");require("../../../Theme/ThemeProvider.context.js");const te=require("../../_/FormFieldBase.types.js"),C=require("../../../Icon/Icon.component.js"),E=require("../../../Menu/index.js"),ne=require("../../../Popover/Popover.component.js"),le=require("../../../Space/index.js"),re=require("../../../Typographies/index.js"),se=require("./FormFieldSelect.hooks.js"),O=r.memo(r.forwardRef(({wrapperClassName:_,wrapperStyle:M,dropdownClassName:q,dropdownStyle:F,optionClassName:v,optionStyle:A,multiple:c=!1,value:m,defaultValue:h,onChange:j,placeholder:w="",options:u=[],maxDropdownHeight:D=300,variant:P=te.FORM_FIELD_VARIANT_MAP.OUTLINED,error:b=!1,fullWidth:I=!1,disabled:a=!1,name:T,form:L,required:k=!1,onMouseEnter:R,onMouseLeave:B,onMouseDown:V,onMouseUp:W,...Y},i)=>{const[$,K]=r.useState(void 0),o=r.useRef(null);r.useEffect(()=>{o.current&&i&&(typeof i=="function"?i(o.current):i.current=o.current)},[i]);const p=m!==void 0,{open:N,actualValue:H,computedWrapperStyle:U,displayContentData:s,dropdownContentData:n,handleOpenChange:z,handleKeyDown:G,WrapperElementEvents:J}=se.useFormFieldSelectDisplay({options:u,multiple:c,value:m,defaultValue:h,onChange:j,placeholder:w,variant:P,error:b,fullWidth:I,disabled:a,maxDropdownHeight:D,width:$,autoCloseOnSelect:!0,isControlled:p,selectRef:o,dropdownClassName:q,dropdownStyle:F,optionClassName:v,optionStyle:A,onMouseEnter:R,onMouseLeave:B,onMouseDown:V,onMouseUp:W}),Q=r.useMemo(()=>t.jsx(re.Typography.Paragraph,{text:s.text,ellipsis:1,style:{width:s.width,color:"inherit",opacity:s.opacity}}),[s.text,s.width,s.opacity]),X=r.useMemo(()=>n.filteredOptions.length===0?null:t.jsx(E.Menu.List,{className:d(S.COMPONENT_CLASSNAME_NAMES.FormFieldSelectDropdown,n.dropdownClassName),style:n.mergedDropdownStyle,children:n.filteredOptions.map(e=>{var x,y;const l=n.multiple?((x=n.selectedValuesSet)==null?void 0:x.has(e.value))??!1:((y=n.selectedOption)==null?void 0:y.value)===e.value,f=e.disabled||!1;return t.jsx(E.Menu.Item,{className:d(S.COMPONENT_CLASSNAME_NAMES.FormFieldSelectOption,n.optionClassName),style:n.mergedOptionStyle,Icon:n.multiple?t.jsx(C.default,{icon:l?"solar:check-square-bold":"solar:square-outline"}):void 0,label:e.label,labelEllipsis:1,selected:l,disabled:f,onClick:()=>!f&&n.handleSelect(e)},`${e.value}`)})}),[n]),Z=p?{value:H}:{defaultValue:h};return t.jsxs(t.Fragment,{children:[t.jsx("select",{ref:o,name:T,...Z,form:L,required:k,disabled:a,multiple:c,"aria-hidden":"true",tabIndex:-1,onChange:void 0,style:ie,...Y,children:c?u.map(e=>t.jsx("option",{value:String(e.value),children:e.label},String(e.value))):t.jsxs(t.Fragment,{children:[t.jsx("option",{value:"",hidden:!0}),u.map(e=>t.jsx("option",{value:String(e.value),children:e.label},String(e.value)))]})}),t.jsx(ne.default,{open:N&&!a,onOpenChange:z,placement:"bottom",trigger:"click",autoCloseOnClickOutside:!0,content:X,children:({ref:e})=>t.jsxs(le.Space.Flex,{as:"div",ref:l=>{typeof e=="function"?e(l):e&&"current"in e&&(e.current=l),l&&K(l.getBoundingClientRect().width)},className:d(S.COMPONENT_CLASSNAME_NAMES.FormFieldSelect,_),style:{...U,...M},tabIndex:a?-1:0,onKeyDown:G,spacing:8,...J,children:[t.jsx(g.default,{as:"div",style:{flex:1,color:"inherit"},children:Q}),t.jsx(g.default,{as:"div",style:{display:"flex",alignItems:"center",transition:"transform 0.25s ease-in-out",transform:N?"rotate(180deg)":"rotate(0deg)",color:"inherit"},children:t.jsx(C.default,{icon:"solar:alt-arrow-down-linear"})})]})})]})}));O.displayName=ee.COMPONENT_DISPLAY_NAMES.FormFieldSelect;const ie={position:"absolute",opacity:0,pointerEvents:"none",width:0,height:0};exports.default=O;
