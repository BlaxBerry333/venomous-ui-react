"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const t=require("react/jsx-runtime"),o=require("react"),m=require("clsx"),de=require("../../../Box/Box.component.js"),b=require("../../../../constants/names/COMPONENT_DISPLAY_NAMES.js"),S=require("../../../../constants/names/COMPONENT_CLASSNAME_NAMES.js");require("../../../../constants/designs/BACKGROUND_COLORS.js");require("../../../../constants/designs/BORDER_COLORS.js");require("../../../../constants/designs/SHADOW_STYLES.js");require("../../../../constants/designs/TEXT_COLORS.js");require("../../../../constants/designs/THEME_BREAKPOINTS.js");require("../../../Theme/ThemeProvider.context.js");const ue=require("../../_/FormFieldBase.types.js"),h=require("../../../Icon/Icon.component.js"),O=require("../../../Menu/index.js"),pe=require("../../../Popover/Popover.component.js"),_=require("../../../Space/index.js"),me=require("../../../Typographies/index.js"),Se=require("../../../../hooks/useCustomComponentProps/index.js"),he=require("./FormFieldSelect.hooks.js"),v=o.memo(o.forwardRef(({wrapperClassName:M,wrapperStyle:C,dropdownClassName:q,dropdownStyle:F,optionClassName:g,optionStyle:A,multiple:I,value:f,defaultValue:x,onChange:P,placeholder:j,options:d=[],maxDropdownHeight:D,variant:L,error:w,fullWidth:T,disabled:W,name:k,form:H,required:R,onMouseEnter:Y,onMouseLeave:$,onMouseDown:B,onMouseUp:V,...K},i)=>{const r=Se.default({displayName:b.COMPONENT_DISPLAY_NAMES.FormFieldSelect}),u=I??r.multiple??!1,U=j??r.placeholder??"",z=D??r.maxDropdownHeight??300,G=L??r.variant??ue.FORM_FIELD_VARIANT_MAP.OUTLINED,J=w??r.error??!1,Q=T??r.fullWidth??!1,p=W??r.disabled??!1,X=R??r.required??!1,[Z,ee]=o.useState(void 0),a=o.useRef(null);o.useEffect(()=>{a.current&&i&&(typeof i=="function"?i(a.current):i.current=a.current)},[i]);const N=f!==void 0,{actualValue:te,computedWrapperStyle:le,displayContentData:c,dropdownContentData:l,handleKeyDown:re,WrapperElementEvents:ne}=he.useFormFieldSelectDisplay({options:d,multiple:u,value:f,defaultValue:x,onChange:P,placeholder:U,variant:G,error:J,fullWidth:Q,disabled:p,maxDropdownHeight:z,width:Z,autoCloseOnSelect:!0,isControlled:N,selectRef:a,dropdownClassName:q,dropdownStyle:F,optionClassName:g,optionStyle:A,onMouseEnter:Y,onMouseLeave:$,onMouseDown:B,onMouseUp:V}),se=o.useMemo(()=>{var n;const e=!c.multiple&&((n=c.selectedOption)==null?void 0:n.StartIcon);return t.jsxs(_.Space.Flex,{spacing:8,style:{flex:1,color:"inherit",alignItems:"center",minWidth:0},children:[e,t.jsx(me.Typography.Paragraph,{text:c.text,ellipsis:1,style:{flex:1,color:"inherit",opacity:c.opacity}})]})},[c]),oe=o.useMemo(()=>l.filteredOptions.length===0?null:t.jsx(O.Menu.List,{className:m(S.COMPONENT_CLASSNAME_NAMES.FormFieldSelectDropdown,l.dropdownClassName),style:l.mergedDropdownStyle,children:l.filteredOptions.map(e=>{var E,y;const n=l.multiple?((E=l.selectedValuesSet)==null?void 0:E.has(e.value))??!1:((y=l.selectedOption)==null?void 0:y.value)===e.value,s=e.disabled||!1,ae=e.StartIcon,ce=n?t.jsx(h.default,{icon:"solar:check-read-linear"}):e.EndIcon??(l.multiple?t.jsx(h.default,{icon:"solar:square-outline"}):void 0);return t.jsx(O.Menu.Item,{className:m(S.COMPONENT_CLASSNAME_NAMES.FormFieldSelectOption,l.optionClassName),style:l.mergedOptionStyle,StartIcon:ae,EndIcon:ce,label:e.label,LabelProps:{ellipsis:1,...e.LabelProps},subLabel:e.subLabel,SubLabelProps:e.SubLabelProps,selected:n,disabled:s,onClick:()=>!s&&l.handleSelect(e)},`${e.value}`)})}),[l]),ie=N?{value:te}:{defaultValue:x};return t.jsxs(t.Fragment,{children:[t.jsx("select",{ref:a,name:k,...ie,form:H,required:X,disabled:p,multiple:u,"aria-hidden":"true",tabIndex:-1,onChange:void 0,style:fe,...K,children:u?d.map(e=>t.jsx("option",{value:String(e.value),children:e.label},String(e.value))):t.jsxs(t.Fragment,{children:[t.jsx("option",{value:"",hidden:!0}),d.map(e=>t.jsx("option",{value:String(e.value),children:e.label},String(e.value)))]})}),t.jsx(pe.default,{defaultOpen:!1,placement:"bottom",triggerEvent:"click",autoCloseOnClickOutside:!0,trigger:({ref:e,isOpen:n})=>t.jsxs(_.Space.Flex,{as:"div",ref:s=>{typeof e=="function"?e(s):e&&"current"in e&&(e.current=s),s&&ee(s.getBoundingClientRect().width)},className:m(S.COMPONENT_CLASSNAME_NAMES.FormFieldSelect,M),style:{...le,...C},tabIndex:p?-1:0,onKeyDown:re,spacing:8,...ne,children:[se,t.jsx(de.default,{as:"div",style:{display:"flex",alignItems:"center",transition:"transform 0.25s ease-in-out",transform:n?"rotate(180deg)":"rotate(0deg)",color:"inherit"},children:t.jsx(h.default,{icon:"solar:alt-arrow-down-linear"})})]}),children:oe})]})}));v.displayName=b.COMPONENT_DISPLAY_NAMES.FormFieldSelect;const fe={position:"absolute",opacity:0,pointerEvents:"none",width:0,height:0};exports.default=v;
