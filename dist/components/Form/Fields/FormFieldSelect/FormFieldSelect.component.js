"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const t=require("react/jsx-runtime"),s=require("react"),S=require("clsx"),ee=require("../../../Box/Box.component.js"),te=require("../../../../constants/names/COMPONENT_DISPLAY_NAMES.js"),m=require("../../../../constants/names/COMPONENT_CLASSNAME_NAMES.js");require("../../../../constants/designs/BACKGROUND_COLORS.js");require("../../../../constants/designs/BORDER_COLORS.js");require("../../../../constants/designs/SHADOW_STYLES.js");require("../../../../constants/designs/TEXT_COLORS.js");require("../../../../constants/designs/THEME_BREAKPOINTS.js");require("../../../Theme/ThemeProvider.context.js");const le=require("../../_/FormFieldBase.types.js"),p=require("../../../Icon/Icon.component.js"),y=require("../../../Menu/index.js"),ne=require("../../../Popover/Popover.component.js"),O=require("../../../Space/index.js"),re=require("../../../Typographies/index.js"),se=require("./FormFieldSelect.hooks.js"),_=s.memo(s.forwardRef(({wrapperClassName:M,wrapperStyle:v,dropdownClassName:C,dropdownStyle:F,optionClassName:b,optionStyle:q,multiple:c=!1,value:f,defaultValue:h,onChange:I,placeholder:g="",options:u=[],maxDropdownHeight:A=300,variant:j=le.FORM_FIELD_VARIANT_MAP.OUTLINED,error:P=!1,fullWidth:L=!1,disabled:d=!1,name:D,form:w,required:T=!1,onMouseEnter:k,onMouseLeave:R,onMouseDown:W,onMouseUp:B,...V},a)=>{const[Y,$]=s.useState(void 0),o=s.useRef(null);s.useEffect(()=>{o.current&&a&&(typeof a=="function"?a(o.current):a.current=o.current)},[a]);const x=f!==void 0,{actualValue:K,computedWrapperStyle:H,displayContentData:i,dropdownContentData:l,handleKeyDown:U,WrapperElementEvents:z}=se.useFormFieldSelectDisplay({options:u,multiple:c,value:f,defaultValue:h,onChange:I,placeholder:g,variant:j,error:P,fullWidth:L,disabled:d,maxDropdownHeight:A,width:Y,autoCloseOnSelect:!0,isControlled:x,selectRef:o,dropdownClassName:C,dropdownStyle:F,optionClassName:b,optionStyle:q,onMouseEnter:k,onMouseLeave:R,onMouseDown:W,onMouseUp:B}),G=s.useMemo(()=>{var n;const e=!i.multiple&&((n=i.selectedOption)==null?void 0:n.StartIcon);return t.jsxs(O.Space.Flex,{spacing:8,style:{flex:1,color:"inherit",alignItems:"center",minWidth:0},children:[e,t.jsx(re.Typography.Paragraph,{text:i.text,ellipsis:1,style:{flex:1,color:"inherit",opacity:i.opacity}})]})},[i]),J=s.useMemo(()=>l.filteredOptions.length===0?null:t.jsx(y.Menu.List,{className:S(m.COMPONENT_CLASSNAME_NAMES.FormFieldSelectDropdown,l.dropdownClassName),style:l.mergedDropdownStyle,children:l.filteredOptions.map(e=>{var N,E;const n=l.multiple?((N=l.selectedValuesSet)==null?void 0:N.has(e.value))??!1:((E=l.selectedOption)==null?void 0:E.value)===e.value,r=e.disabled||!1,X=e.StartIcon,Z=n?t.jsx(p.default,{icon:"solar:check-read-linear"}):e.EndIcon??(l.multiple?t.jsx(p.default,{icon:"solar:square-outline"}):void 0);return t.jsx(y.Menu.Item,{className:S(m.COMPONENT_CLASSNAME_NAMES.FormFieldSelectOption,l.optionClassName),style:l.mergedOptionStyle,StartIcon:X,EndIcon:Z,label:e.label,LabelProps:{ellipsis:1,...e.LabelProps},subLabel:e.subLabel,SubLabelProps:e.SubLabelProps,selected:n,disabled:r,onClick:()=>!r&&l.handleSelect(e)},`${e.value}`)})}),[l]),Q=x?{value:K}:{defaultValue:h};return t.jsxs(t.Fragment,{children:[t.jsx("select",{ref:o,name:D,...Q,form:w,required:T,disabled:d,multiple:c,"aria-hidden":"true",tabIndex:-1,onChange:void 0,style:ae,...V,children:c?u.map(e=>t.jsx("option",{value:String(e.value),children:e.label},String(e.value))):t.jsxs(t.Fragment,{children:[t.jsx("option",{value:"",hidden:!0}),u.map(e=>t.jsx("option",{value:String(e.value),children:e.label},String(e.value)))]})}),t.jsx(ne.default,{defaultOpen:!1,placement:"bottom",triggerEvent:"click",autoCloseOnClickOutside:!0,trigger:({ref:e,isOpen:n})=>t.jsxs(O.Space.Flex,{as:"div",ref:r=>{typeof e=="function"?e(r):e&&"current"in e&&(e.current=r),r&&$(r.getBoundingClientRect().width)},className:S(m.COMPONENT_CLASSNAME_NAMES.FormFieldSelect,M),style:{...H,...v},tabIndex:d?-1:0,onKeyDown:U,spacing:8,...z,children:[G,t.jsx(ee.default,{as:"div",style:{display:"flex",alignItems:"center",transition:"transform 0.25s ease-in-out",transform:n?"rotate(180deg)":"rotate(0deg)",color:"inherit"},children:t.jsx(p.default,{icon:"solar:alt-arrow-down-linear"})})]}),children:J})]})}));_.displayName=te.COMPONENT_DISPLAY_NAMES.FormFieldSelect;const ae={position:"absolute",opacity:0,pointerEvents:"none",width:0,height:0};exports.default=_;
