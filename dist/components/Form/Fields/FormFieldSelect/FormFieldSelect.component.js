"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const t=require("react/jsx-runtime"),s=require("react"),p=require("clsx"),y=require("../../../Box/Box.component.js"),X=require("../../../../constants/names/COMPONENT_DISPLAY_NAMES.js"),S=require("../../../../constants/names/COMPONENT_CLASSNAME_NAMES.js");require("../../../../constants/designs/BACKGROUND_COLORS.js");require("../../../../constants/designs/BORDER_COLORS.js");require("../../../../constants/designs/SHADOW_STYLES.js");require("../../../../constants/designs/TEXT_COLORS.js");require("../../../../constants/designs/THEME_BREAKPOINTS.js");require("../../../Theme/ThemeProvider.context.js");const Z=require("../../_/FormFieldBase.types.js"),E=require("../../../Icon/Icon.component.js"),_=require("../../../Menu/index.js"),ee=require("../../../Popover/Popover.component.js"),te=require("../../../Space/index.js"),le=require("../../../Typographies/index.js"),re=require("./FormFieldSelect.hooks.js"),v=s.memo(s.forwardRef(({wrapperClassName:M,wrapperStyle:O,dropdownClassName:C,dropdownStyle:q,optionClassName:F,optionStyle:A,multiple:c=!1,value:m,defaultValue:h,onChange:g,placeholder:j="",options:u=[],maxDropdownHeight:w=300,variant:D=Z.FORM_FIELD_VARIANT_MAP.OUTLINED,error:P=!1,fullWidth:b=!1,disabled:d=!1,name:I,form:L,required:T=!1,onMouseEnter:k,onMouseLeave:R,onMouseDown:B,onMouseUp:V,...W},i)=>{const[Y,$]=s.useState(void 0),o=s.useRef(null);s.useEffect(()=>{o.current&&i&&(typeof i=="function"?i(o.current):i.current=o.current)},[i]);const f=m!==void 0,{actualValue:K,computedWrapperStyle:H,displayContentData:n,dropdownContentData:l,handleKeyDown:U,WrapperElementEvents:z}=re.useFormFieldSelectDisplay({options:u,multiple:c,value:m,defaultValue:h,onChange:g,placeholder:j,variant:D,error:P,fullWidth:b,disabled:d,maxDropdownHeight:w,width:Y,autoCloseOnSelect:!0,isControlled:f,selectRef:o,dropdownClassName:C,dropdownStyle:q,optionClassName:F,optionStyle:A,onMouseEnter:k,onMouseLeave:R,onMouseDown:B,onMouseUp:V}),G=s.useMemo(()=>t.jsx(le.Typography.Paragraph,{text:n.text,ellipsis:1,style:{width:n.width,color:"inherit",opacity:n.opacity}}),[n.text,n.width,n.opacity]),J=s.useMemo(()=>l.filteredOptions.length===0?null:t.jsx(_.Menu.List,{className:p(S.COMPONENT_CLASSNAME_NAMES.FormFieldSelectDropdown,l.dropdownClassName),style:l.mergedDropdownStyle,children:l.filteredOptions.map(e=>{var N,x;const a=l.multiple?((N=l.selectedValuesSet)==null?void 0:N.has(e.value))??!1:((x=l.selectedOption)==null?void 0:x.value)===e.value,r=e.disabled||!1;return t.jsx(_.Menu.Item,{className:p(S.COMPONENT_CLASSNAME_NAMES.FormFieldSelectOption,l.optionClassName),style:l.mergedOptionStyle,StartIcon:l.multiple?t.jsx(E.default,{icon:a?"solar:check-square-bold":"solar:square-outline"}):void 0,label:e.label,LabelProps:{ellipsis:1},selected:a,disabled:r,onClick:()=>!r&&l.handleSelect(e)},`${e.value}`)})}),[l]),Q=f?{value:K}:{defaultValue:h};return t.jsxs(t.Fragment,{children:[t.jsx("select",{ref:o,name:I,...Q,form:L,required:T,disabled:d,multiple:c,"aria-hidden":"true",tabIndex:-1,onChange:void 0,style:se,...W,children:c?u.map(e=>t.jsx("option",{value:String(e.value),children:e.label},String(e.value))):t.jsxs(t.Fragment,{children:[t.jsx("option",{value:"",hidden:!0}),u.map(e=>t.jsx("option",{value:String(e.value),children:e.label},String(e.value)))]})}),t.jsx(ee.default,{defaultOpen:!1,placement:"bottom",triggerEvent:"click",autoCloseOnClickOutside:!0,trigger:({ref:e,isOpen:a})=>t.jsxs(te.Space.Flex,{as:"div",ref:r=>{typeof e=="function"?e(r):e&&"current"in e&&(e.current=r),r&&$(r.getBoundingClientRect().width)},className:p(S.COMPONENT_CLASSNAME_NAMES.FormFieldSelect,M),style:{...H,...O},tabIndex:d?-1:0,onKeyDown:U,spacing:8,...z,children:[t.jsx(y.default,{as:"div",style:{flex:1,color:"inherit"},children:G}),t.jsx(y.default,{as:"div",style:{display:"flex",alignItems:"center",transition:"transform 0.25s ease-in-out",transform:a?"rotate(180deg)":"rotate(0deg)",color:"inherit"},children:t.jsx(E.default,{icon:"solar:alt-arrow-down-linear"})})]}),children:J})]})}));v.displayName=X.COMPONENT_DISPLAY_NAMES.FormFieldSelect;const se={position:"absolute",opacity:0,pointerEvents:"none",width:0,height:0};exports.default=v;
