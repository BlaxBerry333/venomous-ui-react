"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const r=require("react"),$=require("../../_/FormFieldBase.types.js"),J=require("../../../../hooks/useElementHoverEvents/index.js"),Q=require("../../../../hooks/useElementMouseEvents/index.js");require("../../../../constants/designs/BACKGROUND_COLORS.js");require("../../../../constants/designs/BORDER_COLORS.js");require("../../../../constants/designs/SHADOW_STYLES.js");require("../../../../constants/designs/TEXT_COLORS.js");require("../../../../constants/designs/THEME_BREAKPOINTS.js");const R=require("../../../../constants/names/COMPONENT_DISPLAY_NAMES.js");require("../../../../constants/names/COMPONENT_CLASSNAME_NAMES.js");require("../../../Theme/ThemeProvider.context.js");const X=require("../../_/useFormFieldBaseStyles.js");function z({variant:n=$.FORM_FIELD_VARIANT_MAP.OUTLINED,fullWidth:t=!1,error:A=!1,disabled:o=!1,open:i=!1,width:y,maxDropdownHeight:v=300,isHovered:f}){return X.useFormFieldBaseStyles({displayNames:{wrapper:R.COMPONENT_DISPLAY_NAMES.FormFieldSelect,dropdown:R.COMPONENT_DISPLAY_NAMES.FormFieldSelectDropdown},variant:n,fullWidth:t,error:A,disabled:o,readOnly:o,isFocused:i,isHovered:f,customConfig:{wrapperExtraStyles:{cursor:o?"not-allowed":"pointer",userSelect:"none"},dropdownExtraStyles:{maxHeight:v,width:y}}})}function G({options:n,multiple:t=!1,value:A,defaultValue:o,onChange:i,autoCloseOnSelect:y,disabled:v=!1,isControlled:f,selectRef:O,onMouseEnter:g,onMouseLeave:B,onMouseDown:q,onMouseUp:W}){const[x,N]=r.useState(t?o??[]:o),[d,l]=r.useState(!1),[M,S]=r.useState(-1),F=f?A:x;r.useEffect(()=>{const e=O==null?void 0:O.current;if(!e||f)return;const a=e.form;if(!a)return;const s=()=>{N(t?o??[]:o),l(!1),S(-1)};return a.addEventListener("reset",s),()=>a.removeEventListener("reset",s)},[f,o,t,O]);const{isHovered:k,MouseEnterEvent:T,MouseLeaveEvent:P}=J.default({disabled:v,onMouseEnter:g,onMouseLeave:B}),{MouseDownEvent:u,MouseUpEvent:c}=Q.default({disabled:v,onMouseDown:q,onMouseUp:W}),I=r.useCallback(e=>{P(e),c(e)},[P,c]),_=r.useMemo(()=>({onMouseEnter:T,onMouseLeave:I,onMouseDown:u,onMouseUp:c}),[T,I,u,c]),L=r.useMemo(()=>{if(t){const e=Array.isArray(F)?F:[];return n.filter(a=>e.includes(a.value))}else{const e=F,a=n.find(s=>s.value===e);return a?[a]:[]}},[n,F,t]),h=t?void 0:L[0],m=r.useCallback(e=>{if(!e.disabled)if(t){const s=(()=>{const E=f?A:x;return Array.isArray(E)?E:[]})(),V=s.includes(e.value)?s.filter(E=>E!==e.value):[...s,e.value];f||N(V);const H=n.filter(E=>V.includes(E.value));i==null||i(V,H),y&&(l(!1),S(-1))}else f||N(e.value),i==null||i(e.value,e),l(!1),S(-1)},[t,f,A,x,i,n,y]),p=r.useCallback(e=>{v||(l(e),e||S(-1))},[v]),b=r.useCallback(e=>{if(!v)switch(e.key){case"ArrowDown":e.preventDefault(),d?S(a=>{const s=a+1;return s>=n.length?0:s}):l(!0);break;case"ArrowUp":e.preventDefault(),d?S(a=>{const s=a-1;return s<0?n.length-1:s}):l(!0);break;case"Enter":e.preventDefault(),d&&M>=0&&n[M]?m(n[M]):d||l(!0);break;case"Escape":e.preventDefault(),l(!1),S(-1);break;case"Tab":d&&(l(!1),S(-1));break}},[v,d,M,n,m]);return r.useMemo(()=>({value:F,selectedOption:h,selectedOptions:L,open:d,filteredOptions:n,highlightedIndex:M,isHovered:k,handleSelect:m,handleOpenChange:p,handleKeyDown:b,WrapperElementEvents:_}),[F,h,L,d,n,M,k,m,p,b,_])}function Z({options:n,multiple:t=!1,value:A,defaultValue:o,onChange:i,placeholder:y="",variant:v=$.FORM_FIELD_VARIANT_MAP.OUTLINED,error:f=!1,fullWidth:O=!1,disabled:g=!1,maxDropdownHeight:B=300,width:q,autoCloseOnSelect:W,isControlled:x,selectRef:N,dropdownClassName:d,dropdownStyle:l,optionClassName:M,optionStyle:S,onMouseEnter:F,onMouseLeave:k,onMouseDown:T,onMouseUp:P}){const{selectedOption:u,selectedOptions:c,open:I,filteredOptions:_,isHovered:L,handleSelect:h,handleOpenChange:m,handleKeyDown:p,WrapperElementEvents:b}=G({options:n,multiple:t,value:A,defaultValue:o,onChange:i,autoCloseOnSelect:W,disabled:g,isControlled:x,selectRef:N,onMouseEnter:F,onMouseLeave:k,onMouseDown:T,onMouseUp:P}),{wrapperStyle:e,dropdownStyle:a}=z({variant:v,fullWidth:O,error:f,disabled:g,open:I,width:q,maxDropdownHeight:B,isHovered:L}),{actualValue:s,selectedValuesSet:U}=r.useMemo(()=>{if(!t)return{actualValue:(u==null?void 0:u.value)??"",selectedValuesSet:null};const w=[],D=new Set;for(const j of c)w.push(j.value),D.add(j.value);return{actualValue:w,selectedValuesSet:D}},[t,u,c]),V=r.useMemo(()=>{if(!t)return(u==null?void 0:u.label)||y;if(c.length===0)return y;let w=c[0].label;for(let D=1;D<c.length;D++)w+=", "+c[D].label;return w},[t,u,c,y]),H=r.useMemo(()=>{const w=t?c.length>0:!!u,D=Number(q)*.8;return{text:V,width:D,opacity:w?1:.5,selectedOption:u,selectedOptions:c,multiple:t}},[V,t,u,c,q]),E=r.useMemo(()=>({...a,...l}),[a,l]),Y=r.useMemo(()=>S,[S]),K=r.useMemo(()=>({filteredOptions:_,selectedValuesSet:U,selectedOption:u,multiple:t,handleSelect:h,dropdownClassName:d,mergedDropdownStyle:E,optionClassName:M,mergedOptionStyle:Y}),[_,U,u,t,h,d,E,M,Y]);return r.useMemo(()=>({open:I,actualValue:s,computedWrapperStyle:e,displayContentData:H,dropdownContentData:K,handleOpenChange:m,handleKeyDown:p,WrapperElementEvents:b}),[I,s,e,H,K,m,p,b])}exports.useFormFieldSelectActions=G;exports.useFormFieldSelectDisplay=Z;exports.useFormFieldSelectStyles=z;
