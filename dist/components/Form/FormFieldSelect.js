"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const r=require("react/jsx-runtime"),q=require("clsx"),t=require("react"),O=require("../../hooks/useElementFocus/index.js");require("../../utils/design/colors.js");require("../../utils/design/Shadow.js");const M=require("../../utils/design/TypographySize.js"),w=require("../Icon/Icon.js"),j=require("../Menu/index.js"),N=require("../Popover/Popover.js"),B=require("../Space/index.js"),P=require("../Typography/index.js"),W=require("./_useFormFieldStyle.js"),D=require("./FormField.js"),p=t.memo(({isOriginalSelect:o=!1,fullWidth:s,required:S=!1,isError:i=!1,disabled:a=!1,label:f,helpText:l,...h})=>{const{isFocused:n,setIsFocused:u,handleFocus:m,handleBlur:x}=O.default(),{commonStyles:c}=W.useFormFieldStyle({fullWidth:s,isDisabled:a,isError:i,isFocused:n});return r.jsxs(D.default,{label:f,required:S,isDisabled:a,isError:i,isFocused:n,fullWidth:s,helpText:l,children:[o&&r.jsx(R,{commonStyles:c,handleFocus:m,handleBlur:x,disabled:a,...h}),!o&&r.jsx(T,{commonStyles:c,setIsFocused:u,disabled:a,...h})]})});p.displayName="FormField.Select";const R=t.memo(({commonStyles:o,handleFocus:s,handleBlur:S,name:i,autoComplete:a="off",options:f,onChange:l,value:h,disabled:n,className:u,style:m,...x})=>r.jsx("select",{name:i,autoComplete:a,disabled:n,onFocus:s,onBlur:S,onChange:l,value:h,className:q("Venomous-UI-React--FormField.Select",u),style:{boxSizing:"border-box",...o,...m},...x,children:f.map(c=>r.jsx("option",{value:c.value,disabled:c.disabled,children:c.label},c.value))})),T=t.memo(({commonStyles:o,setIsFocused:s,disabled:S,name:i,value:a,options:f,onChange:l,className:h,style:n})=>{const[u,m]=t.useState(a||null),[x,c]=t.useState(!1),g=t.useRef(null),[y,F]=t.useState(0);t.useEffect(()=>{m(a||null)},[a]),t.useEffect(()=>{if(g.current){const e=()=>{var b;const d=(b=g.current)==null?void 0:b.getBoundingClientRect();d&&F(d.width)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)}},[]),t.useEffect(()=>{if(x&&g.current){const e=g.current.getBoundingClientRect();e&&e.width!==y&&F(e.width)}},[x,y]);const k=t.useCallback(e=>{m(e),c(!1),s(!1);const d={target:{name:i,value:e},currentTarget:{name:i,value:e}};l==null||l(d)},[i,l,s]),z=t.useCallback(e=>{e.stopPropagation(),m(null),s(!1);const d={target:{name:i,value:""},currentTarget:{name:i,value:""}};l==null||l(d)},[i,l,s]),E=t.useMemo(()=>{var e;return((e=f.find(d=>d.value===u))==null?void 0:e.label)||""},[f,u]),v=y||(n==null?void 0:n.width);return r.jsx(N.default,{direction:"bottom",alignment:"start",trigger:"click",style:{width:"100%"},onClickOutside:()=>{c(!1),s(!1)},contentStyle:{width:v},renderTrigger:()=>r.jsxs(B.Space.Flex,{ref:g,row:!0,onClick:()=>{c(!0),s(!0)},style:{...o,height:o.minHeight,width:"100%",maxWidth:v,display:"flex",alignItems:"center"},children:[r.jsx(P.Typography.Paragraph,{ellipsis:1,style:{flex:1},children:E}),u&&!S&&r.jsx(w.default,{icon:"solar:close-circle-line-duotone",width:16,onClick:z,style:{cursor:"pointer",transition:"color 0.2s ease"}}),r.jsx(w.default,{icon:"solar:alt-arrow-down-line-duotone",width:16,style:{transition:"transform 0.2s ease",transform:x?"rotate(180deg)":"rotate(0deg)"}})]}),children:r.jsx(j.Menu.List,{as:"ul",className:q("Venomous-UI-React--FormField.Select",h),style:{width:"100%"},children:f.map(e=>r.jsx(j.Menu.Item,{id:e.id,text:e.label,isDisabled:e.disabled,isActive:e.value===u,onClick:()=>{e.disabled||k(e.value)},style:{cursor:e.disabled?"not-allowed":"pointer",fontSize:M.TypographySize.small}},e.id))})})});R.displayName="FormField.Select.Original";T.displayName="FormField.Select.Custom";exports.default=p;
