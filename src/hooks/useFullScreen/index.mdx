import { Meta, Source } from "@storybook/blocks";

<Meta title="hooks/useFullScreen" />

# useFullscreen

用于控制整个页面或某个特定元素的全屏显示。

<Source
  language="tsx"
  dark
  code={`
"use client";

import { useFullScreen } from "venomous-ui-react/hooks";
`.trim()}
/>

## Types

<Source
  language="ts"
  dark
  code={`
type HookParametersType = {
  elementRef?: React.RefObject<HTMLElement | null>;   // 要全屏显示的元素（ 不传则全屏整个页面 ）
  options?: {
    onEnter?: () => void;                 // 进入全屏时的回调
    onExit?: () => void;                  // 退出全屏时的回调
    onError?: (error: Error) => void;     // 发生错误时的回调
  }
};
type HookReturnType = {
  isSupported: boolean;                   // 浏览器是否支持全屏 API
  isFullscreen: boolean;                  // 当前是否处于全屏状态
  enterFullscreen: () => Promise<void>;   // 手动进入全屏 ( 必须手动触发不能通过 React.useEffect )
  exitFullscreen: () => Promise<void>;    // 手动退出全屏 ( 必须手动触发不能通过 React.useEffect )
  toggleFullscreen: () => Promise<void>;  // 切换全屏状态 ( 必须手动触发不能通过 React.useEffect )
}
`.trim()}
/>

## Usage

<br />

### 全屏整个页面

<Source
  language="tsx"
  dark
  code={`
"use client";

import React from "react";
import { Theme, Button, Typography } from "venomous-ui-react/components";
import { useFullscreen } from "venomous-ui-react/hooks";

export function App() {
  return (
    <Theme.Provider>
      <Component />
    </Theme.Provider>
  );
}

export function Component() {
  const { isFullscreen, isSupported, toggleFullscreen, enterFullscreen, exitFullscreen } = useFullscreen();
  return (
    <div>
      <Button text={isFullscreen ? "Exit Fullscreen" : "Enter Fullscreen"} onClick={toggleFullscreen} />
      <Button text="Enter Fullscreen" onClick={enterFullscreen} disabled={isFullscreen} />
      <Button text="Exit Fullscreen" onClick={exitFullscreen} disabled={!isFullscreen} />
      {!isSupported && <Typography.Paragraph text="Your browser does not support fullscreen" />}
    </div>
  ); 
} 
`.trim()} />

### 全屏特定元素

<Source
  language="tsx"
  dark
  code={`
"use client";

import React from "react";
import { Theme, Card, IconButton, Typography } from "venomous-ui-react/components";
import { useFullscreen } from "venomous-ui-react/hooks";

export function App() {
  return (
    <Theme.Provider>
      <Component />
    </Theme.Provider>
  );
}

export function Component() {
  const containerRef = React.useRef<HTMLDivElement>(null);
  const { isFullscreen, isSupported, toggleFullscreen } = useFullscreen(containerRef);
  return (
    <Card
      ref={containerRef}
      style={{
        minWidth: isFullscreen ? "100vw" : 400,
        minHeight: isFullscreen ? "100vh" : 300,
        position: "relative",
        transition: "all 0.25s ease",
      }}
    >
      <IconButton
        icon={isFullscreen ? "solar:quit-full-screen-linear" : "solar:full-screen-linear"}
        onClick={toggleFullscreen}
        style={{ position: "absolute", top: 16, right: 16, zIndex: 1 }}
      />
      <Typography.Title text={isFullscreen ? "Fullscreen Mode" : "Normal Mode"} />
      {!isSupported && <Typography.Paragraph text="Your browser does not support fullscreen" />}
    </Card>
  );
}
`.trim()}
/>

### 使用回调函数

<Source
  language="tsx"
  dark
  code={`
"use client";

import React from "react";
import { Theme, Button } from "venomous-ui-react/components";
import { useFullscreen } from "venomous-ui-react/hooks";

export function App() {
  return (
    <Theme.Provider>
      <Component />
    </Theme.Provider>
  );
}

export function App() {
  const { toggleFullscreen } = useFullscreen(undefined, {
    onEnter: () => console.log("Entered fullscreen"),
    onExit: () => console.log("Exited fullscreen"),
    onError: (error) => console.error("Fullscreen error:", error),
  });
  
  return <Button onClick={toggleFullscreen} text="Toggle Fullscreen" />;
}
`.trim()}
/>
